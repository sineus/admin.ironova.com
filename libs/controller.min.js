iroAdmin.controller("dashboard",["$scope","$rootScope","$location","ngDialog","$localStorage","$routeParams","$http",function(b,a,g,e,c,d,f){b.scrollTo=function(h){angular.element("body").animate({scrollTop:h});
};if(localStorage.getItem("admin")!=null){a.auth=true;}else{a.auth=false;}b.logOut=function(){localStorage.removeItem("admin");a.auth=false;g.path("/");
};b.CancelConfirm=function(i){var h=confirm("Voulez-vous vraiment quitter cette page ?");if(h==true){g.path("/catalog/"+i);}};b.labels=["January","February","March","April","May","June","July"];
b.series=["Ventes"];b.data=[[65,59,80,81,56,55,40]];b.onClick=function(i,h){};$("#myTabs a").click(function(h){h.preventDefault();$(this).tab("show");});
$('[data-toggle="tooltip"]').tooltip();f.get("process/customer/customer/customer-customer-new.php").success(function(h){b.newCustomers=h;});b.notifCustomer=function(){f.get("process/customer/customer/customer-view-notif.php").success(function(h){f.get("process/customer/customer/customer-customer-new.php").success(function(i){b.newCustomers=i;
});});};f.get("process/order/order/order-order-new.php").success(function(h){b.newOrders=h;});b.notifOrder=function(){f.get("process/order/order/order-view-notif.php").success(function(h){f.get("process/order/order/order-order-new.php").success(function(i){b.newOrders=i;
console.log(i);});});};}]);iroAdmin.controller("catalog-product",["$scope","$rootScope","$http","Upload","$timeout","$location","$routeParams",function(c,a,g,b,d,f,e){c.getAllProduct=function(){g.get("process/catalog/product/catalog-product-all.php").success(function(h){c.products=h;
a.loading=false;console.log(h);});};c.getAllProduct();c.getItem=function(i,h){return g.get(i,{params:{item:h}}).then(function(j){return j.data;});};c.getItem("process/catalog/product/catalog-product-single.php",e.productID).then(function(h){c.product=h;
a.loading=false;g.get("process/catalog/product/catalog-carrier-single.php",{params:{productID:c.product.id_product}}).success(function(i){c.carriersSingle=i;
});g.get("process/carrier/carrier-all.php",{params:{productID:c.product.id_product}}).success(function(i){c.carriers=i;});g.get("process/catalog/product/catalog-picture-single.php",{params:{productID:c.product.id_product}}).success(function(i){c.picturesProduct=i;
a.loading=false;});});c.templatesAddProduct=[{name:"Informations",url:"partials/catalog/add/information.php"},{name:"Prix",url:"partials/catalog/add/price.php"},{name:"Catégories",url:"partials/catalog/add/category.php"},{name:"Livraison",url:"partials/catalog/add/delivery.php"},{name:"Quantité",url:"partials/catalog/add/quantity.php"},];
c.addTemplate=c.templatesAddProduct[0].url;c.addName=c.templatesAddProduct[0].name;c.selectAddTemplate=function(h){c.addTemplate=h.url;c.addName=h.name;
};c.isActiveAdd=function(h){return c.addTemplate===h.url;};c.newProduct={};c.addProduct=function(){c.resAddProduct=false;g({method:"POST",url:"process/catalog/product/catalog-create-product.php",data:c.newProduct,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(h){f.path("/catalog/product");
c.resAddProduct=h;});};c.templatesModifyProduct=[{name:"Informations",url:"partials/catalog/modify/information.php"},{name:"Prix",url:"partials/catalog/modify/price.php"},{name:"Catégories",url:"partials/catalog/modify/category.php"},{name:"Livraison",url:"partials/catalog/modify/delivery.php"},{name:"Quantité",url:"partials/catalog/modify/quantity.php"},{name:"Images",url:"partials/catalog/modify/picture.php"},];
c.modifyTemplate=c.templatesModifyProduct[0].url;c.modifyName=c.templatesModifyProduct[0].name;c.selectModifyTemplate=function(h){c.modifyTemplate=h.url;
c.modifyName=h.name;};c.isActiveModify=function(h){return c.modifyTemplate===h.url;};c.updateProduct=function(h){c.resUpdateProduct=false;g({method:"POST",url:"process/catalog/product/catalog-modify-product.php",data:c.product,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(i){angular.element("body").animate({scrollTop:0});
c.resUpdateProduct=i;if(h==true){d(function(){f.path("/catalog/product");},2000);}});};c.deleteProduct=function(i){resDeleteProduct=false;var h=confirm("Voulez-vous vraiment supprimer ce produit ?");
if(h==true){g.get("process/catalog/product/catalog-delete-product.php",{params:{productID:i}}).success(function(j){resDeleteProduct=j;f.path("/catalog/product");
});}};c.files="";c.uploadFiles=function(k,h,j,i){c.files=k;c.fileRes=false;angular.forEach(k,function(l){if(l&&!l.$error){l.upload=b.upload({url:h,file:l,fields:{productID:j,productURL:i}});
l.upload.then(function(m){d(function(){l.result=m.data;c.fileRes=true;g.get("process/catalog/product/catalog-picture-single.php",{params:{productID:j}}).success(function(n){c.picturesProduct=n;
a.loading=false;});});a.loading=false;},function(m){if(m.status>0){c.errorMsg=m.status+": "+m.data;}});l.upload.progress(function(m){});}});};c.getItem=function(i,h){return g.get(i,{params:{productID:h}}).then(function(j){return j.data;
});};c.removeImg=function(i,h){g.get("process/catalog/product/catalog-remove-picture.php",{params:{id_img:i}}).success(function(j){c.removeImgRes=j;g.get("process/catalog/product/catalog-picture-single.php",{params:{productID:h}}).success(function(k){c.picturesProduct=k;
a.loading=false;});});};g.get("process/catalog/category/catalog-category-all.php").success(function(h){c.categories=h;a.loading=false;});c.addCarrier=function(h){$("#select-from option:selected").each(function(){$("#select-to").append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");
g.get("process/catalog/product/catalog-add-carrier.php",{params:{carrier:$(this).val(),productID:h}}).success(function(i){});$(this).remove();});};c.removeCarrier=function(h){$("#select-to option:selected").each(function(){$("#select-from").append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");
g.get("process/catalog/product/catalog-remove-carrier.php",{params:{carrier:$(this).val(),productID:h}}).success(function(i){});$(this).remove();});};g.get("process/preference/envoimoinscher/get_category_list.php").success(function(h){c.categoryList=h;
});$('[data-toggle="tooltip"]').tooltip();}]);iroAdmin.controller("catalog-category",["$scope","$rootScope","$http","Upload","$timeout","$location","$routeParams",function(c,a,g,b,d,f,e){c.getAllCategory=function(){g.get("process/catalog/category/catalog-category-all.php").success(function(h){c.categories=h;
a.loading=false;});};c.getAllCategory();c.newCategory={};c.addCategory=function(){c.resAddCategory=false;g({method:"POST",url:"process/catalog/category/catalog-create-category.php",data:c.newCategory,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(h){c.resAddCategory=h;
f.path("/catalog/category");});};c.getCategorySingle=function(i,h){return g.get(i,{params:{item:h}}).then(function(j){return j.data;});};c.getCategorySingle("process/catalog/category/catalog-category-single.php",e.category).then(function(h){c.category=h;
});c.updateCategory=function(){c.resUpdateCategory=false;g({method:"POST",url:"process/catalog/category/catalog-modify-category.php",data:c.category,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(h){c.resUpdateCategory=h;
});};c.deleteCategory=function(i){c.resDeleteCategory=false;var h=confirm("Voulez-vous vraiment supprimer cette catégorie ?");if(h==true){g.get("process/catalog/category/catalog-delete-category.php",{params:{categoryID:i}}).success(function(j){c.resDeleteCategory=j;
c.getAllCategory();});}};$('[data-toggle="tooltip"]').tooltip();}]);iroAdmin.controller("order",["$scope","$rootScope","$http","$location","$routeParams",function(b,a,e,d,c){b.getAllOrder=function(){e.get("process/order/order/order-order-all.php").success(function(f){b.orders=f;
b.loading=false;});};b.getAllOrder();b.getItem=function(g,f){return e.get(g,{params:{item:f}}).then(function(h){return h.data;});};b.getItem("process/order/order/order-order-single.php",c.orderID).then(function(f){b.order=f;
a.loading=false;e.get("process/order/order/order-single-item.php",{params:{id:c.orderID}}).success(function(g){b.items=g;});});b.deleteOrder=function(g){b.resDeleteOrder=false;
var f=confirm("Voulez-vous vraiment supprimer cette commande ?");if(f==true){e.get("process/order/order/order-delete-order.php",{params:{orderID:g}}).success(function(h){b.resDeleteOrder=h;
b.getAllOrder();});}};b.map={center:{latitude:45,longitude:-73},zoom:8};$('[data-toggle="tooltip"]').tooltip();}]);iroAdmin.controller("customer",["$scope","$http","$routeParams","$location","$rootScope",function(b,e,c,d,a){b.getAllCustomer=function(){e.get("process/customer/customer/customer-customer-all.php").success(function(f){b.customers=f;
b.loading=false;});};b.getAllCustomer();b.getAllCustomerAddress=function(){e.get("process/customer/customer/customer-address-all.php").success(function(f){b.customersAddress=f;
b.loading=false;});};b.getAllCustomerAddress();b.deleteAddress=function(g){b.resDeleteOrder=false;var f=confirm("Voulez-vous vraiment supprimer cette commande ?");
if(f==true){e.get("process/order/order/order-delete-order.php",{params:{orderID:g}}).success(function(h){b.resDeleteOrder=h;b.getAllOrder();});}};$('[data-toggle="tooltip"]').tooltip();
}]);iroAdmin.controller("carrier",["$scope",function(a){}]);iroAdmin.controller("localization",["$scope",function(a){}]);iroAdmin.controller("preference",["$scope","$http","$location","$rootScope","$timeout","$compile",function(b,f,e,a,d,c){b.templatesEnvoimoinscher=[{name:"Compte marchand",url:"partials/preference/envoimoinscher/merchant-account.php"},{name:"Adresse d'enlèvement",url:"partials/preference/envoimoinscher/merchant-address.php"},{name:"Description des envois",url:"partials/preference/envoimoinscher/order-description.php"},{name:"Paramètres",url:"partials/preference/envoimoinscher/parameter.php"},{name:"Transporteurs simples",url:"partials/preference/envoimoinscher/simple-carrier.php"},{name:"Transporteurs avancés",url:"partials/preference/envoimoinscher/advanced-carrier.php"},{name:"Simulateur d'offres",url:"partials/preference/envoimoinscher/simulation.php"},];
b.envoimoinscherTemplate=b.templatesEnvoimoinscher[3].url;b.envoimoinscherName=b.templatesEnvoimoinscher[3].name;b.selectEnvoimoinscherTemplate=function(g){b.envoimoinscherTemplate=g.url;
b.envoimoinscherName=g.name;};b.isActiveEnvoimoinscher=function(g){return b.envoimoinscherTemplate===g.url;};b.getCarrier=function(g,h){return f.get(g,{params:{type:h}}).then(function(i){return i.data;
});};b.getCarrier("process/preference/envoimoinscher/get_carriers_list.php","2").then(function(g){b.carriers=g;});b.getCarrier("process/preference/envoimoinscher/get_carriers_list.php","1").then(function(g){b.advancedCarriers=g;
});b.params={};f.get("process/preference/envoimoinscher/get-all-info-api.php").success(function(g){b.params=g[0];});b.addApiInfo=function(){f({method:"POST",url:"process/preference/envoimoinscher/add_api_info.php",data:b.params,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(g){angular.element("body").animate({scrollTop:0});
if(g.type==0){b.addApiResError=g.message;}else{b.addApiInfoRes=g;}});};f.get("process/preference/envoimoinscher/get_category_list.php").success(function(g){b.categoryList=g;
});f.get("process/preference/envoimoinscher/get_country_list.php").success(function(g){b.countryList=g;});f.get("process/catalog/product/catalog-product-all.php").success(function(g){b.products=g;
});b.simulation={};b.simulateAPI=function(){f({method:"POST",url:"process/preference/envoimoinscher/simulateAPI.php",data:b.simulation,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(g){b.simulateDevis=g.offers;
console.log(g);});};f.get("process/preference/envoimoinscher/get_point_simple_api.php").success(function(g){b.addresses=g.listPoints;console.log(g);b.map={center:{latitude:45,longitude:-73},zoom:5};
});b.isSelectedPoint=function(g){return b.mondialCode===b.addresses[g].code;};b.selectPoint=function(g){b.mondialCode=g;};b.$on("mapInitialized",function(h,g){map=g,marker=map.markers[0];
});b.info=function(h,g){var i=new google.maps.InfoWindow({content:g});i.close(map,map.markers[h]);i.open(map,map.markers[h]);map.setCenter(map.markers[h].getPosition());
};}]);iroAdmin.controller("menu",["$scope","$window","$location",function(a,b,c){a.isActive=function(d){var e=(d===c.path());return e;};}]);iroAdmin.controller("login",["$scope","$rootScope","$http","$localStorage","$location",function(b,a,e,c,d){b.loginForm={};
b.submitLogin=function(){e({method:"POST",url:"iro-admin/process/login/login-admin.php",data:b.loginForm,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(g){b.user=g.login;
b.name=g.name;a.auth=g.auth;if(a.auth===true){var f=[{login:b.user,name:b.name,auth:b.auth}];localStorage.setItem("admin",JSON.stringify(f));return b.resLogin="You are connected";
}else{return b.resLogin="You are not connected";}});};}]);